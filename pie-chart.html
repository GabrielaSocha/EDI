<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Car Makes Pie Chart</title>

  <!--chart will be rendered in "canvas" element,
    included chart.js library-->

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <canvas id="carMakesChart" width="400" height="400"></canvas>

  <script>
    //fetch data from api in json format
    fetch('https://my.api.mockaroo.com/cars.json?key=26099330')
      .then(response => response.json())
      .then(data => {
        //count each car make and store it in carMakesCount
        const carMakesCount = {};

        data.forEach(entry => {
          const make = entry.make;
          carMakesCount[make] = (carMakesCount[make] || 0) + 1;
        });

        //extract elements: labels(car makes) and data values(counts) to create a chart
        const labels = Object.keys(carMakesCount);
        const dataValues = Object.values(carMakesCount);

        //pie chart on element <canvas>
        const ctx = document.getElementById('carMakesChart').getContext('2d');
        const carMakesChart = new Chart(ctx, {
          type: 'pie',
          data: {
            labels: labels,
            datasets: [{
              data: dataValues,
              backgroundColor: getRandomColors(dataValues.length),
            }],
          },
        });

        //generate random colors
        function getRandomColors(count) {
          const colors = [];
          for (let i = 0; i < count; i++) {
            const color = `rgba(${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)}, 0.7)`;
            colors.push(color);
          }
          return colors;
        }
      })
      //in case the api data cant be fetched
      .catch(error => console.error('Error fetching data:', error));
  </script>
</body>
</html>

